import numpy as np
import matplotlib.pyplot as plt


# 11
#classes = [0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 2, 1, 0, 1, 1, 1, 1, 1, 2, 1, 1, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 2, 2, 1, 0, 2, 1, 2, 1, 0, 2, 2, 0, 0, 0, 1, 0, 2, 1, 1, 2, 0, 1, 1, 0, 2, 0, 1, 0, 0, 2, 0, 0, 2, 0, 2, 1, 0, 0, 1, 2, 1, 1, 2, 1, 0, 0, 1, 0, 0, 0, 2, 2, 0, 1, 0, 1, 0, 1, 1, 0, 2, 0, 1, 0, 0, 0, 1, 0, 2, 0, 0, 1, 1, 1, 2, 1, 0, 2, 1, 2, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 1, 0, 0, 1, 2, 0, 1, 1, 1, 1, 2, 0, 1, 0, 2, 2, 1, 2, 0, 2, 2, 0, 0, 2, 2, 1, 1, 0, 1, 1, 1, 2, 1, 0, 0, 1, 1, 0, 2, 1, 0, 0, 0, 2, 0, 1, 1, 1, 1, 0, 0, 2, 1, 2, 1, 1, 1, 1, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 2, 2, 0, 2, 0, 0, 1, 1, 0, 2, 1, 2, 1, 2, 1, 1, 2, 0, 2, 0, 0, 2, 1, 0, 2, 1, 1, 1, 0, 0, 2, 2, 2, 2, 0, 1, 0, 1, 0, 1, 1, 2, 0, 2, 2, 0, 2, 0, 1, 0, 1, 0, 1, 1, 1, 2, 1, 1, 0, 0, 2, 0, 2, 2, 2, 1, 0, 1, 1, 1, 0, 0, 2, 2, 1, 1]
#label = [0.0417, 0.1833, 0.3633, 0.1267, 0.0683, 0.6317, 0.0150, 0.2833, 0.5683, 0.0833, 0.2750, 0.9800, 0.3217, 0.0183, 0.5600, 0.4517, 0.2500, 0.3450, 0.2250, 0.9200, 0.4833, 0.3300, 0.0350, 0.2333, 0.2333, 0.6467, 0.5617, 0.7083, 0.8317, 0.4317, 0.3350, 0.6033, 0.7483, 0.9750, 0.4400, 0.1333, 0.9133, 0.2450, 0.9400, 0.6500, 0.0183, 0.7783, 0.8767, 0.1050, 0.1333, 0.3067, 0.7967, 0.0150, 0.8967, 0.5683, 0.2667, 0.9767, 0.0350, 0.2767, 0.5050, 0.2517, 0.9733, 0.1433, 0.3950, 0.0250, 0.0100, 0.8250, 0.3217, 0.0883, 0.9600, 0.1033, 0.9550, 0.2900, 0.1117, 0.0183, 0.6583, 0.9517, 0.2267, 0.3350, 0.9567, 0.5933, 0.0117, 0.0250, 0.3700, 0.1117, 0.0967, 0.1367, 0.8883, 0.8483, 0.1300, 0.7750, 0.0850, 0.3267, 0.0183, 0.3150, 0.6550, 0.2583, 0.9317, 0.0933, 0.7633, 0.1000, 0.0367, 0.0417, 0.4083, 0.0883, 0.9400, 0.0317, 0.0433, 0.3533, 0.7150, 0.4883, 0.7067, 0.3950, 0.1617, 0.9150, 0.3250, 0.8500, 0.0833, 0.3200, 0.3150, 0.3150, 0.4967, 0.7600, 0.3300, 0.7950, 0.7450, 0.9800, 0.6783, 0.1367, 0.0717, 0.4233, 0.9650, 0.1617, 0.2967, 0.3933, 0.2600, 0.1833, 0.9667, 0.1333, 0.2467, 0.2500, 0.7817, 0.6483, 0.5683, 0.7833, 0.0883, 0.8900, 0.9533, 0.0617, 0.0533, 0.5100, 0.9833, 0.3450, 0.2867, 0.2450, 0.4083, 0.5767, 0.4600, 0.7117, 0.5217, 0.1233, 0.1417, 0.4517, 0.2550, 0.1083, 0.8567, 0.4617, 0.0683, 0.2767, 0.1350, 0.9717, 0.0917, 0.4850, 0.2833, 0.2200, 0.5017, 0.0183, 0.0133, 0.7517, 0.4817, 0.9050, 0.3983, 0.3317, 0.1817, 0.4700, 0.9200, 0.1150, 0.1500, 0.9000, 0.2650, 0.0183, 0.0267, 0.0783, 0.0100, 0.9350, 0.9717, 0.8450, 0.1250, 0.8150, 0.1167, 0.2117, 0.4383, 0.4067, 0.1617, 0.9750, 0.5267, 0.9767, 0.2750, 0.9167, 0.3433, 0.5317, 0.9717, 0.1067, 0.9600, 0.0083, 0.1567, 0.8700, 0.3550, 0.1900, 0.9350, 0.3050, 0.3817, 0.4317, 0.0900, 0.0100, 0.9583, 0.9767, 0.8850, 0.7500, 0.2250, 0.4117, 0.2750, 0.4267, 0.0167, 0.5700, 0.1900, 0.8783, 0.0200, 0.9367, 0.9667, 0.1467, 0.9633, 0.0283, 0.1817, 0.1050, 0.5800, 0.2200, 0.4817, 0.3983, 0.8650, 0.8950, 0.6983, 0.2017, 0.0117, 0.0700, 0.9200, 0.0433, 0.9733, 0.9483, 0.9717, 0.6867, 0.0850, 0.2433, 0.4700, 0.3233, 0.1567, 0.2117, 0.9550, 0.9567, 0.7233, 0.5017]
#preds = preds = [0.1423, 0.2425, 0.4279, 0.3129, 0.2128, 0.1594, 0.2711, 0.4327, 0.5601, 0.2172, 0.2558, 0.6493, 0.2037, 0.2104, 0.4196, 0.2307, 0.1941, 0.1413, 0.4657, 0.4306, 0.3027, 0.1765, 0.2873, 0.2006, 0.1903, 0.3386, 0.3340, 0.3867, 0.3577, 0.1781, 0.2411, 0.1692, 0.5057, 0.5431, 0.5942, 0.2239, 0.5364, 0.3424, 0.6167, 0.4676, 0.2067, 0.4084, 0.6589, 0.1617, 0.1736, 0.1715, 0.3077, 0.2036, 0.5533, 0.2836, 0.1865, 0.3302, 0.3200, 0.3676, 0.2311, 0.2432, 0.5703, 0.1788, 0.2251, 0.1952, 0.1549, 0.3362, 0.1794, 0.1788, 0.3145, 0.3582, 0.5092, 0.2236, 0.1931, 0.3239, 0.2100, 0.6500, 0.2141, 0.4158, 0.7200, 0.5521, 0.2910, 0.2199, 0.1977, 0.1415, 0.2311, 0.2404, 0.4807, 0.6505, 0.2033, 0.5051, 0.2096, 0.2334, 0.1495, 0.4098, 0.2209, 0.2265, 0.1788, 0.1823, 0.4646, 0.1958, 0.1624, 0.1924, 0.3560, 0.1953, 0.4677, 0.1954, 0.2223, 0.1744, 0.3728, 0.4703, 0.3558, 0.2515, 0.5063, 0.6981, 0.2046, 0.5263, 0.2884, 0.1700, 0.3730, 0.3190, 0.4343, 0.4563, 0.1821, 0.6619, 0.3408, 0.3327, 0.6116, 0.1758, 0.1320, 0.1504, 0.6888, 0.2167, 0.1461, 0.2307, 0.2723, 0.2253, 0.4509, 0.2609, 0.2646, 0.2185, 0.3220, 0.4404, 0.2424, 0.4323, 0.1581, 0.6741, 0.3716, 0.1924, 0.1727, 0.2558, 0.7358, 0.2041, 0.2027, 0.3037, 0.5408, 0.2779, 0.2623, 0.2544, 0.4262, 0.4006, 0.1863, 0.5590, 0.1868, 0.1803, 0.4586, 0.3555, 0.2049, 0.2596, 0.2424, 0.4501, 0.2016, 0.6797, 0.1652, 0.2819, 0.1949, 0.2540, 0.1742, 0.2594, 0.4471, 0.2830, 0.2427, 0.1995, 0.2899, 0.4266, 0.5769, 0.1475, 0.2297, 0.6693, 0.2129, 0.2472, 0.1923, 0.1793, 0.1603, 0.5763, 0.5673, 0.3426, 0.1486, 0.3024, 0.2715, 0.1911, 0.1600, 0.3873, 0.1830, 0.5859, 0.7052, 0.5206, 0.4580, 0.6643, 0.3835, 0.4489, 0.3688, 0.1650, 0.5463, 0.2484, 0.1444, 0.4038, 0.3340, 0.2127, 0.5714, 0.3887, 0.1511, 0.1906, 0.2385, 0.1505, 0.6587, 0.6037, 0.6129, 0.3414, 0.1621, 0.3287, 0.2031, 0.2480, 0.2471, 0.2440, 0.1852, 0.2973, 0.1786, 0.7155, 0.5359, 0.1559, 0.5299, 0.3822, 0.4713, 0.2764, 0.2111, 0.1877, 0.3358, 0.3239, 0.2280, 0.4178, 0.4893, 0.1516, 0.1657, 0.1987, 0.5048, 0.1924, 0.6713, 0.4490, 0.6964, 0.2874, 0.1822, 0.2325, 0.4845, 0.2052, 0.1711, 0.2098, 0.6756, 0.6058, 0.5611, 0.4821]

# 14
preds = [0.2475, 0.2708, 0.5650, 0.3967, 0.3078, 0.2580, 0.2755, 0.4772, 0.7187, 0.4621, 0.2895, 0.8346, 0.3261, 0.2894, 0.6018, 0.3105, 0.3538, 0.2138, 0.4642, 0.5290, 0.3270, 0.2589, 0.4515, 0.3287, 0.3898, 0.5139, 0.5104, 0.4930, 0.5083, 0.2530, 0.3311, 0.4029, 0.7904, 0.8458, 0.6247, 0.2917, 0.3515, 0.3034, 0.7090, 0.5693, 0.2903, 0.6528, 0.7979, 0.2756, 0.2974, 0.2267, 0.3327, 0.2911, 0.6848, 0.3961, 0.2439, 0.6051, 0.4561, 0.4867, 0.3693, 0.2814, 0.8309, 0.3558, 0.2807, 0.2774, 0.3029, 0.5073, 0.2226, 0.2565, 0.4477, 0.3185, 0.7762, 0.2940, 0.2506, 0.4250, 0.3737, 0.8206, 0.3321, 0.4706, 0.8857, 0.7917, 0.3389, 0.3872, 0.2905, 0.1993, 0.4760, 0.2903, 0.8380, 0.7306, 0.3188, 0.7840, 0.2588, 0.3068, 0.2726, 0.5147, 0.3250, 0.4198, 0.3802, 0.2224, 0.7123, 0.3512, 0.3063, 0.3216, 0.5725, 0.1979, 0.8238, 0.3025, 0.2765, 0.2423, 0.4130, 0.5336, 0.3585, 0.2862, 0.4507, 0.8311, 0.3136, 0.7448, 0.3173, 0.3355, 0.3584, 0.3153, 0.6255, 0.6161, 0.2599, 0.8593, 0.4819, 0.4420, 0.7093, 0.2582, 0.2229, 0.5580, 0.2942, 0.3376, 0.2727, 0.4151, 0.3111, 0.2246, 0.2333, 0.8434, 0.3161, 0.2504, 0.4335, 0.3881, 0.2516, 0.6198, 0.2917, 0.3311, 0.2372, 0.3514, 0.7114, 0.2589, 0.5646, 0.2364, 0.8579, 0.4979, 0.2395, 0.2002, 0.4312, 0.7788, 0.3876, 0.3479, 0.3157, 0.7984, 0.3395, 0.3374, 0.3655, 0.4680, 0.5807, 0.2651, 0.9082, 0.3169, 0.3081, 0.6941, 0.5447, 0.3791, 0.3158, 0.3394, 0.6164, 0.2585, 0.8315, 0.2253, 0.3782, 0.2094, 0.5311, 0.2436, 0.3565, 0.3369, 0.4455, 0.3361, 0.2380, 0.8476, 0.7951, 0.6612, 0.6415, 0.4026, 0.5031, 0.4515, 0.6104, 0.2227, 0.2619, 0.8025, 0.3728, 0.2470, 0.2754, 0.2375, 0.3141, 0.8974, 0.8128, 0.5579, 0.2553, 0.3271, 0.3006, 0.2398, 0.2626, 0.3529, 0.3570, 0.7414, 0.7887, 0.6807, 0.8298, 0.8217, 0.3152, 0.6341, 0.5705, 0.3120, 0.7353, 0.2583, 0.3082, 0.6526, 0.4331, 0.3747, 0.6954, 0.3507, 0.3454, 0.3549, 0.2840, 0.2215, 0.8977, 0.8736, 0.7562, 0.3683, 0.3708, 0.2757, 0.8177, 0.7287, 0.2165, 0.5942, 0.3686, 0.6436, 0.3516, 0.2635, 0.2350, 0.3862, 0.3591, 0.3502, 0.4405, 0.7477, 0.2002, 0.2421, 0.2260, 0.6848, 0.3600, 0.8410, 0.6884, 0.8074, 0.6250, 0.2032, 0.3743, 0.4790, 0.2312, 0.2292]
label = [0.0417, 0.1833, 0.3633, 0.1267, 0.0683, 0.6317, 0.0150, 0.2833, 0.5683, 0.0833, 0.2750, 0.9800, 0.3217, 0.0183, 0.5600, 0.4517, 0.2500, 0.3450, 0.2250, 0.9200, 0.4833, 0.3300, 0.0350, 0.2333, 0.2333, 0.6467, 0.5617, 0.7083, 0.8317, 0.4317, 0.3350, 0.6033, 0.7483, 0.9750, 0.4400, 0.1333, 0.9133, 0.2450, 0.9400, 0.6500, 0.0183, 0.7783, 0.8767, 0.1050, 0.1333, 0.3067, 0.7967, 0.0150, 0.8967, 0.5683, 0.2667, 0.9767, 0.0350, 0.2767, 0.5050, 0.2517, 0.9733, 0.1433, 0.3950, 0.0250, 0.0100, 0.8250, 0.3217, 0.0883, 0.9600, 0.1033, 0.9550, 0.2900, 0.1117, 0.0183, 0.6583, 0.9517, 0.2267, 0.3350, 0.9567, 0.5933, 0.0117, 0.0250, 0.3700, 0.1117, 0.0967, 0.1367, 0.8883, 0.8483, 0.1300, 0.7750, 0.0850, 0.3267, 0.0183, 0.3150, 0.6550, 0.2583, 0.9317, 0.0933, 0.7633, 0.1000, 0.0367, 0.0417, 0.4083, 0.0883, 0.9400, 0.0317, 0.0433, 0.3533, 0.7150, 0.4883, 0.7067, 0.3950, 0.1617, 0.9150, 0.3250, 0.8500, 0.0833, 0.3200, 0.3150, 0.3150, 0.4967, 0.7600, 0.3300, 0.7950, 0.7450, 0.9800, 0.6783, 0.1367, 0.2250, 0.4117, 0.2750, 0.4267, 0.0167, 0.5700, 0.1900, 0.0717, 0.4233, 0.9650, 0.1617, 0.2967, 0.3933, 0.2600, 0.1833, 0.9667, 0.1333, 0.2467, 0.2500, 0.7817, 0.6483, 0.5683, 0.7833, 0.0883, 0.8900, 0.9533, 0.0617, 0.0533, 0.5100, 0.9833, 0.3450, 0.2867, 0.2450, 0.4083, 0.5767, 0.4600, 0.7117, 0.5217, 0.1233, 0.1417, 0.4517, 0.2550, 0.1083, 0.8567, 0.4617, 0.0683, 0.2767, 0.1350, 0.9717, 0.0917, 0.4850, 0.2833, 0.2200, 0.5017, 0.0183, 0.0133, 0.7517, 0.4817, 0.9050, 0.3983, 0.2117, 0.9550, 0.9567, 0.7233, 0.5017, 0.3317, 0.1817, 0.4700, 0.9200, 0.1150, 0.1500, 0.9000, 0.2650, 0.0183, 0.0267, 0.0783, 0.0100, 0.9350, 0.9717, 0.8450, 0.1250, 0.8150, 0.1167, 0.2117, 0.4383, 0.4067, 0.1617, 0.9750, 0.5267, 0.9767, 0.2750, 0.9167, 0.3433, 0.5317, 0.9717, 0.1067, 0.9600, 0.0083, 0.1567, 0.8700, 0.3550, 0.1900, 0.9350, 0.3050, 0.3817, 0.4317, 0.0900, 0.0100, 0.9583, 0.9767, 0.8850, 0.7500, 0.8783, 0.0200, 0.9367, 0.9667, 0.1467, 0.9633, 0.0283, 0.1817, 0.1050, 0.5800, 0.2200, 0.4817, 0.3983, 0.8650, 0.8950, 0.6983, 0.2017, 0.0117, 0.0700, 0.9200, 0.0433, 0.9733, 0.9483, 0.9717, 0.6867, 0.0850, 0.2433, 0.4700, 0.3233, 0.1567]
classes = [0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 2, 1, 0, 1, 1, 1, 1, 1, 2, 1, 1, 0, 1, 1, 1, 1, 1, 2, 1, 0, 1, 2, 2, 1, 0, 2, 1, 2, 1, 0, 2, 2, 0, 0, 0, 1, 0, 2, 1, 1, 2, 0, 1, 1, 0, 2, 0, 1, 0, 0, 2, 0, 0, 2, 0, 2, 1, 0, 0, 1, 2, 1, 1, 2, 1, 0, 0, 1, 0, 0, 0, 2, 2, 0, 1, 0, 1, 0, 1, 1, 0, 2, 0, 1, 0, 0, 0, 1, 0, 2, 0, 0, 1, 1, 1, 2, 1, 0, 2, 1, 2, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 2, 0, 1, 1, 1, 1, 2, 0, 1, 0, 2, 2, 1, 2, 0, 2, 2, 0, 0, 2, 2, 1, 1, 0, 1, 1, 1, 2, 1, 0, 0, 1, 1, 0, 2, 1, 0, 0, 0, 2, 0, 1, 1, 1, 1, 0, 0, 2, 1, 2, 1, 0, 2, 2, 1, 1, 1, 1, 1, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 2, 2, 0, 2, 0, 0, 1, 1, 0, 2, 1, 2, 1, 2, 1, 1, 2, 0, 2, 0, 0, 2, 1, 0, 2, 1, 1, 1, 0, 0, 2, 2, 2, 2, 2, 0, 2, 2, 0, 2, 0, 1, 0, 1, 0, 1, 1, 1, 2, 1, 1, 0, 0, 2, 0, 2, 2, 2, 1, 0, 1, 1, 1, 0]

cd = ["CN", "MCI", "AD"]
col = ["#00FF00", "#CCCC00", "#FF0000"]
graphc = [col[i] for i in classes]

# ( CN([pred], [label]), MCI([pred], [label]), AD([pred], [label]) )
dxs = (([], [], []), ([], [], []), ([], [], []))
for idx, dx in enumerate(classes):
	dxs[dx][0].append(preds[idx])
	dxs[dx][1].append(label[idx])
	dxs[dx][2].append(col[dx])

def get_rsquared(y_list, x_list):
    corr_mat = np.corrcoef(x_list, y_list)
    corr_xy = corr_mat[0,1]
    r_sq = corr_xy**2

    return r_sq

def get_mape(y_pred, y_true): 
    return np.mean(np.abs((np.array(y_true) - np.array(y_pred)) / np.array(y_true))) * 100

def get_mae(y_pred, y_true):
	return np.mean(np.abs((np.array(y_true) - np.array(y_pred))))

def get_rmse(y_pred, y_true):
    return np.sqrt(((np.array(y_pred) - np.array(y_true)) ** 2).mean())

def print_scores(name, preds, label):
	print("\n----------------%s Scores:----------------\n" % name)
	print("R^2:", get_rsquared(preds, label))
	print("Mean Absolute Percent Error:", get_mape(preds, label))
	print("Mean Absolute Error:", get_mae(preds, label))
	print("Root Mean Squared Error:", get_rmse(preds, label))

def plot_data(title, preds, label, colors, draw_resid):
	plt.title(title)
	plt.xlim(0, 1)
	plt.ylim(0, 1)
	

	if colors is not None:
		plt.scatter(preds, label, c = colors)
	else:
		plt.scatter(preds, label)

	xpoints = ypoints = plt.xlim()
	plt.xlabel("Predicted Score")
	plt.ylabel("Composite Score")

	if draw_resid:
		for (x_pred, y_label) in zip(preds, label):
			plt.plot([x_pred, x_pred], [y_label, x_pred], color='k', linestyle='-')
	plt.plot(xpoints, ypoints, linestyle='solid', color=(1.0, 0, 0, 0.3), lw=3, scalex=False, scaley=False)


DRAW_RESID = False
def main():
	print_scores("Overall", preds, label)
	print_scores("CN", dxs[0][0], dxs[0][1])
	print_scores("MCI", dxs[1][0], dxs[1][1])
	print_scores("AD", dxs[2][0], dxs[2][1])

	plot_data("Overall", preds, label, None, False)

	plt.figure()
	plot_data("CN", dxs[0][0], dxs[0][1], dxs[0][2], DRAW_RESID)

	plt.figure()
	plot_data("MCI", dxs[1][0], dxs[1][1], dxs[1][2], DRAW_RESID)

	plt.figure()
	plot_data("AD", dxs[2][0], dxs[2][1], dxs[2][2], DRAW_RESID)

	plt.show()

if __name__ == '__main__':
	main()
